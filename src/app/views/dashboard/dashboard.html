<div layout-fill layout="column">
  <h2 class="text-center page-header">Project Dashboard</h2>
  <div
    layout="row"
    layout-fill
    layout-sm="column"
    ng-show="$ctrl.loading"
    layout-align="center center"
  >
    <md-progress-circular md-mode="indeterminate"></md-progress-circular>
  </div>
  <div class="text-center">
    <p>
      <md-button ui-sref="create-project" class="md-raised md-primary"
        ><md-icon md-font-icon="fa fa-plus fa-fw"></md-icon><span>New Project</span></md-button
      >
    </p>
    <p>
      Click on project title to view its expeditions and entity counts
    </p>
  </div>
  <div ng-if="$ctrl.currentUser">
    <h3>Private Projects for {{ $ctrl.currentUser.username }}</h3>
    <table class="table table-hover table-condensed">
      <thead>
        <th class="text-center">Project Title</th>
        <th class="text-center" ng-repeat="entity in $ctrl.entities">
          {{ entity }}
        </th>
      </thead>

      <tr ng-repeat="data in $ctrl.projectsAndTheirEntityCounts">
        <!-- 
        ng-show="data.user.username === $ctrl.currentUser.username" 
        the service call for projects entity counts will need to include the user, or we redisign the table 
        -->
        <td>
          <a href="#" ng-click="$ctrl.showExpeditionsDetail(project)">{{ data.project_title }}</a>
        </td>
        <td class="text-center">{{ data.samples }}</td>
        <td class="text-center">{{ data.events }}</td>
        <td class="text-center">{{ data.tissues }}</td>
        <td class="text-center">{{ data.event_photos }}</td>
        <td class="text-center">{{ data.fasta }}</td>
        <td class="text-center">{{ data.fastq }}</td>
        <td></td>
      </tr>
    </table>
  </div>

  <h3>Public Projects</h3>
  <table class="table table-hover table-condensed">
    <thead>
      <th>Project Title</th>
      <th ng-repeat="entity in $ctrl.entities">
        {{ entity }}
      </th>
    </thead>
    <tr ng-repeat="data in $ctrl.projectsAndTheirEntityCounts">
      <!--  ng-if="$ctrl.currentUser.username !== data.user.username" -->
      <td>
        <a href="#" ng-click="$ctrl.showExpeditionsDetail(project)">{{ data.project_title }}</a>
      </td>
      <td class="text-center">{{ data.samples }}</td>
      <td class="text-center">{{ data.events }}</td>
      <td class="text-center">{{ data.tissues }}</td>
      <td class="text-center">{{ data.event_photos }}</td>
      <td class="text-center">{{ data.fasta }}</td>
      <td class="text-center">{{ data.fastq }}</td>
    </tr>
  </table>
</div>
